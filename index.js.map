{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export function fetchImages(query) {\n  const BASE_URL = 'https://pixabay.com/api/';\n  const API_KEY = '48242250-abd806f4b021d280ea207da17';\n\n  return fetch(\n    `${BASE_URL}?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true`\n  )\n    .then(resp => {\n      if (!resp.ok) {\n        throw new Error(resp.statusText);\n      }\n      return resp.json();\n    })\n    .then(data => {\n      return data;\n    })\n    .catch(err => {\n      console.log(err);\n      throw err;\n    });\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { fetchImages } from './js/pixabay-api.js';\n\nconst cardContainer = document.querySelector('.card-container');\nconst searchForm = document.querySelector('.search-form');\nconst loading = document.querySelector('.loader');\n\nsearchForm.addEventListener('submit', handleSearch);\n\nfunction handleSearch(event) {\n  event.preventDefault();\n  const form = event.currentTarget;\n  const query = form.elements.query.value;\n\n  cardContainer.innerHTML = '';\n\n  showLoadingIndicator();\n\n  fetchImages(query)\n    .then(renderImagesCard)\n    .catch(onFetchError)\n    .finally(() => {\n      form.reset();\n      hideLoadingIndicator();\n    });\n}\n\nfunction renderImagesCard(data) {\n  if (data.hits && data.hits.length > 0) {\n    const markup = data.hits\n      .map(\n        ({\n          webformatURL,\n          largeImageURL,\n          likes,\n          views,\n          comments,\n          downloads,\n          tags,\n        }) => {\n          const tagsString = tags.split(',').join(', ');\n          return `<div class=\"card\">\n      <a href=\"${largeImageURL}\">\n        <img src=\"${webformatURL}\" alt=\"${tagsString}\" />\n      </a>\n    <div class=\"card-properties\">\n        <ul class=\"card-list\">\n            <li>Likes <span class=\"accent-item\">${likes}</span></li>\n            <li>Views <span class=\"accent-item\">${views}</span></li>\n            <li>Comments <span class=\"accent-item\">${comments}</span></li>\n            <li>Downloads <span class=\"accent-item\">${downloads}</span></li>\n        </ul>\n    </div>\n    </div>`;\n        }\n      )\n      .join('');\n\n    cardContainer.insertAdjacentHTML('beforeend', markup);\n\n    const lightbox = new SimpleLightbox('.card-container a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n\n    lightbox.refresh();\n  } else {\n    iziToast.error({\n      message: `Sorry, there are no images matching your search query. Please try again!`,\n      position: 'topRight',\n      titleColor: 'white',\n      messageColor: 'white',\n      timeout: 5000,\n      backgroundColor: '#EF4040',\n    });\n  }\n}\n\nfunction onFetchError(error) {\n  console.log(error);\n\n  iziToast.error({\n    message: `Sorry, there are no images matching your search query. Please try again!`,\n    position: 'topRight',\n    titleColor: 'white',\n    messageColor: 'white',\n    timeout: 5000,\n    backgroundColor: '#EF4040',\n  });\n}\n\n\nfunction showLoadingIndicator() {\n  loading.style.display = 'block';\n}\n\nfunction hideLoadingIndicator() {\n  loading.style.display = 'none';\n}"],"names":["fetchImages","query","resp","data","err","cardContainer","searchForm","loading","handleSearch","event","form","showLoadingIndicator","renderImagesCard","onFetchError","hideLoadingIndicator","markup","webformatURL","largeImageURL","likes","views","comments","downloads","tags","tagsString","SimpleLightbox","iziToast","error"],"mappings":"6vBAAO,SAASA,EAAYC,EAAO,CAIjC,OAAO,MACL,qEAAgCA,CAAK,0DACtC,EACE,KAAKC,GAAQ,CACZ,GAAI,CAACA,EAAK,GACR,MAAM,IAAI,MAAMA,EAAK,UAAU,EAEjC,OAAOA,EAAK,MAClB,CAAK,EACA,KAAKC,GACGA,CACR,EACA,MAAMC,GAAO,CACZ,cAAQ,IAAIA,CAAG,EACTA,CACZ,CAAK,CACL,CCbA,MAAMC,EAAgB,SAAS,cAAc,iBAAiB,EACxDC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAU,SAAS,cAAc,SAAS,EAEhDD,EAAW,iBAAiB,SAAUE,CAAY,EAElD,SAASA,EAAaC,EAAO,CAC3BA,EAAM,eAAc,EACpB,MAAMC,EAAOD,EAAM,cACbR,EAAQS,EAAK,SAAS,MAAM,MAElCL,EAAc,UAAY,GAE1BM,IAEAX,EAAYC,CAAK,EACd,KAAKW,CAAgB,EACrB,MAAMC,CAAY,EAClB,QAAQ,IAAM,CACbH,EAAK,MAAK,EACVI,GACN,CAAK,CACL,CAEA,SAASF,EAAiBT,EAAM,CAC9B,GAAIA,EAAK,MAAQA,EAAK,KAAK,OAAS,EAAG,CACrC,MAAMY,EAASZ,EAAK,KACjB,IACC,CAAC,CACC,aAAAa,EACA,cAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,EACA,KAAAC,CACV,IAAc,CACJ,MAAMC,EAAaD,EAAK,MAAM,GAAG,EAAE,KAAK,IAAI,EAC5C,MAAO;AAAA,iBACAL,CAAa;AAAA,oBACVD,CAAY,UAAUO,CAAU;AAAA;AAAA;AAAA;AAAA,kDAIFL,CAAK;AAAA,kDACLC,CAAK;AAAA,qDACFC,CAAQ;AAAA,sDACPC,CAAS;AAAA;AAAA;AAAA,WAItD,CACF,EACA,KAAK,EAAE,EAEVhB,EAAc,mBAAmB,YAAaU,CAAM,EAEnC,IAAIS,EAAe,oBAAqB,CACvD,aAAc,MACd,aAAc,GACpB,CAAK,EAEQ,QAAO,CACpB,MACIC,EAAS,MAAM,CACb,QAAS,2EACT,SAAU,WACV,WAAY,QACZ,aAAc,QACd,QAAS,IACT,gBAAiB,SACvB,CAAK,CAEL,CAEA,SAASZ,EAAaa,EAAO,CAC3B,QAAQ,IAAIA,CAAK,EAEjBD,EAAS,MAAM,CACb,QAAS,2EACT,SAAU,WACV,WAAY,QACZ,aAAc,QACd,QAAS,IACT,gBAAiB,SACrB,CAAG,CACH,CAGA,SAASd,GAAuB,CAC9BJ,EAAQ,MAAM,QAAU,OAC1B,CAEA,SAASO,GAAuB,CAC9BP,EAAQ,MAAM,QAAU,MAC1B"}