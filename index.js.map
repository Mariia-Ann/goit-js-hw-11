{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport function renderImagesCard(data, cardContainer) {\n    if (data.hits && data.hits.length > 0) {\n      const markup = data.hits\n        .map(\n          ({\n            webformatURL,\n            largeImageURL,\n            likes,\n            views,\n            comments,\n            downloads,\n            tags,\n          }) => {\n            const tagsString = tags.split(',').join(', ');\n            return `<div class=\"card\">\n              <a href=\"${largeImageURL}\">\n                <img src=\"${webformatURL}\" alt=\"${tagsString}\" />\n              </a>\n            <div class=\"card-properties\">\n                <ul class=\"card-list\">\n                    <li>Likes <span class=\"accent-item\">${likes}</span></li>\n                    <li>Views <span class=\"accent-item\">${views}</span></li>\n                    <li>Comments <span class=\"accent-item\">${comments}</span></li>\n                    <li>Downloads <span class=\"accent-item\">${downloads}</span></li>\n                </ul>\n            </div>\n            </div>`;\n          }\n        )\n        .join('');\n  \n      cardContainer.insertAdjacentHTML('beforeend', markup);\n  \n      const lightbox = new SimpleLightbox('.card-container a', {\n        captionsData: 'alt',\n        captionDelay: 250,\n      });\n  \n      lightbox.refresh();\n    } else {\n      showErrorMessage('Sorry, there are no images matching your search query. Please try again!');\n    }\n  }\n  \n  export function showLoadingIndicator(loading) {\n    loading.style.display = 'block';\n  }\n  \n  export function hideLoadingIndicator(loading) {\n    loading.style.display = 'none';\n  }\n  \n  export function showErrorMessage(message) {\n    iziToast.error({\n      message: message,\n      position: 'topRight',\n      titleColor: 'white',\n      messageColor: 'white',\n      timeout: 5000,\n      backgroundColor: '#EF4040',\n    });\n  }","export function fetchImages(query) {\n  const BASE_URL = 'https://pixabay.com/api/';\n  const API_KEY = '48242250-abd806f4b021d280ea207da17';\n\n  return fetch(\n    `${BASE_URL}?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true`\n  )\n    .then(resp => {\n      if (!resp.ok) {\n        throw new Error(resp.statusText);\n      }\n      return resp.json();\n    })\n    .then(data => {\n      return data;\n    })\n    .catch(err => {\n      console.log(err);\n      throw err;\n    });\n}\n","import {\n  renderImagesCard,\n  showLoadingIndicator,\n  hideLoadingIndicator,\n  showErrorMessage,\n} from './js/render-functions.js';\n\nimport { fetchImages } from './js/pixabay-api.js';\n\nconst cardContainer = document.querySelector('.card-container');\nconst searchForm = document.querySelector('.search-form');\nconst loading = document.querySelector('.loader');\n\nsearchForm.addEventListener('submit', handleSearch);\n\nfunction handleSearch(event) {\n  event.preventDefault();\n  const form = event.currentTarget;\n  const query = form.elements.query.value;\n\n  cardContainer.innerHTML = '';\n\n  showLoadingIndicator(loading);\n\n  fetchImages(query)\n    .then(data => renderImagesCard(data, cardContainer))\n    .catch(onFetchError)\n    .finally(() => {\n      form.reset();\n      hideLoadingIndicator(loading);\n    });\n}\n\nfunction onFetchError(error) {\n  console.log(error);\n  showErrorMessage(\n    'Sorry, there was an error with the request. Please try again later.'\n  );\n}"],"names":["renderImagesCard","data","cardContainer","markup","webformatURL","largeImageURL","likes","views","comments","downloads","tags","tagsString","SimpleLightbox","showErrorMessage","showLoadingIndicator","loading","hideLoadingIndicator","message","iziToast","fetchImages","query","resp","err","searchForm","handleSearch","event","form","onFetchError","error"],"mappings":"6vBAKO,SAASA,EAAiBC,EAAMC,EAAe,CAClD,GAAID,EAAK,MAAQA,EAAK,KAAK,OAAS,EAAG,CACrC,MAAME,EAASF,EAAK,KACjB,IACC,CAAC,CACC,aAAAG,EACA,cAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,EACA,KAAAC,CACZ,IAAgB,CACJ,MAAMC,EAAaD,EAAK,MAAM,GAAG,EAAE,KAAK,IAAI,EAC5C,MAAO;AAAA,yBACML,CAAa;AAAA,4BACVD,CAAY,UAAUO,CAAU;AAAA;AAAA;AAAA;AAAA,0DAIFL,CAAK;AAAA,0DACLC,CAAK;AAAA,6DACFC,CAAQ;AAAA,8DACPC,CAAS;AAAA;AAAA;AAAA,mBAI5D,CACF,EACA,KAAK,EAAE,EAEVP,EAAc,mBAAmB,YAAaC,CAAM,EAEnC,IAAIS,EAAe,oBAAqB,CACvD,aAAc,MACd,aAAc,GACtB,CAAO,EAEQ,QAAO,CACtB,MACMC,EAAiB,0EAA0E,CAE9F,CAEM,SAASC,EAAqBC,EAAS,CAC5CA,EAAQ,MAAM,QAAU,OACzB,CAEM,SAASC,EAAqBD,EAAS,CAC5CA,EAAQ,MAAM,QAAU,MACzB,CAEM,SAASF,EAAiBI,EAAS,CACxCC,EAAS,MAAM,CACb,QAASD,EACT,SAAU,WACV,WAAY,QACZ,aAAc,QACd,QAAS,IACT,gBAAiB,SACvB,CAAK,CACL,CClEO,SAASE,EAAYC,EAAO,CAIjC,OAAO,MACL,qEAAgCA,CAAK,0DACtC,EACE,KAAKC,GAAQ,CACZ,GAAI,CAACA,EAAK,GACR,MAAM,IAAI,MAAMA,EAAK,UAAU,EAEjC,OAAOA,EAAK,MAClB,CAAK,EACA,KAAKpB,GACGA,CACR,EACA,MAAMqB,GAAO,CACZ,cAAQ,IAAIA,CAAG,EACTA,CACZ,CAAK,CACL,CCXA,MAAMpB,EAAgB,SAAS,cAAc,iBAAiB,EACxDqB,EAAa,SAAS,cAAc,cAAc,EAClDR,EAAU,SAAS,cAAc,SAAS,EAEhDQ,EAAW,iBAAiB,SAAUC,CAAY,EAElD,SAASA,EAAaC,EAAO,CAC3BA,EAAM,eAAc,EACpB,MAAMC,EAAOD,EAAM,cACbL,EAAQM,EAAK,SAAS,MAAM,MAElCxB,EAAc,UAAY,GAE1BY,EAAqBC,CAAO,EAE5BI,EAAYC,CAAK,EACd,KAAKnB,GAAQD,EAAiBC,EAAMC,CAAa,CAAC,EAClD,MAAMyB,CAAY,EAClB,QAAQ,IAAM,CACbD,EAAK,MAAK,EACVV,EAAqBD,CAAO,CAClC,CAAK,CACL,CAEA,SAASY,EAAaC,EAAO,CAC3B,QAAQ,IAAIA,CAAK,EACjBf,EACE,qEACJ,CACA"}